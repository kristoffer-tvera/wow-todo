var data,updateTimeout;if(LocalStorageAvailable()){var currentData=window.localStorage.getItem("data");data=currentData&&0<currentData.length?JSON.parse(currentData):{characters:[],tasks:[],status:[]}}else data={characters:[],tasks:[],status:[]},alert("No LocalStorage. Saving/persisting will not be possible (this means: When you close this window, all data dissapears");function LocalStorageAvailable(){var a="meme";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(a){return!1}}function GetClassFromId(a){switch(a.toString()){case"0":return{name:"Warrior",color:"#C79C6E",text:"#000000"};case"1":return{name:"Paladin",color:"#F58CBA",text:"#000000"};case"2":return{name:"Hunter",color:"#ABD473",text:"#000000"};case"3":return{name:"Rogue",color:"#FFF569",text:"#000000"};case"4":return{name:"Priest",color:"#FFFFFF",text:"#000000"};case"5":return{name:"Death Knight",color:"#C41F3B",text:"#FFFFFF"};case"6":return{name:"Shaman",color:"#0070DE",text:"#FFFFFF"};case"7":return{name:"Mage",color:"#40C7EB",text:"#000000"};case"8":return{name:"Warlock",color:"#8787ED",text:"#000000"};case"9":return{name:"Monk",color:"#00FF96",text:"#000000"};case"10":return{name:"Druid",color:"#FF7D0A",text:"#000000"};case"11":return{name:"Demon Hunter",color:"#A330C9",text:"#FFFFFF"}}}function AddCharacter(){var a=document.getElementById("addcharform"),t=new FormData(a),e=t.get("name"),r=t.get("class");data.characters.push({id:data.characters.length,name:e,class:r});for(var s=0;s<data.status.length;s++)data.status[s].push(!1);a.reset()}function RemoveCharacter(a){for(var t=0;t<data.status.length;t++)data.status[t].splice(a,1);data.characters.splice(a,1)}function AddTask(){for(var a=document.getElementById("addtaskform"),t=new FormData(a).get("taskname"),e=[],r=0;r<data.characters.length;r++)e.push(!1);data.status.push(e),data.tasks.push(t),a.reset()}function RemoveTask(a){data.tasks.splice(a,1),data.status.splice(a,1)}function ResetCheckboxes(){for(var a=[],t=0;t<data.tasks.length;t++){a[t]=[];for(var e=0;e<data.characters.length;e++)a[t][e]=!1}data.status=a,app.status=a}function Import(){var a=document.getElementById("dataform").querySelector("textarea").value;if(""!==a&&""!==a.trim())try{data=JSON.parse(a),app.characters=data.characters,app.tasks=data.tasks,app.status=data.status,alert("Successfully imported data")}catch(a){alert("Failed during import, data looks invalid")}else alert("no data")}function Export(){document.getElementById("dataform").querySelector("textarea").value=JSON.stringify(data)}function UpdateLocalStorage(){LocalStorageAvailable()&&(clearTimeout(updateTimeout),updateTimeout=setTimeout(function(){console.log("dumping to localstorage"),window.localStorage.setItem("data",JSON.stringify(data))},100))}var app=new Vue({el:"#app",data:{characters:data.characters,tasks:data.tasks,status:data.status},methods:{removeCharacter:function(a){RemoveCharacter(a)},removeTask:function(a){RemoveTask(a)},classColors:function(a){var t=GetClassFromId(a);return"color: "+t.text+"; background-color: "+t.color+";"}},watch:{characters:function(){UpdateLocalStorage()},tasks:function(){UpdateLocalStorage()},status:function(){UpdateLocalStorage()}}}),characterModal=new Vue({el:"#addchar",data:{availableClassIds:[0,1,2,3,4,5,6,7,8,9,10,11]},methods:{getClassFromId:function(a){return GetClassFromId(a)}}});